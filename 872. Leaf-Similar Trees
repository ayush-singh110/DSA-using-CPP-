class Solution {
public:
    bool leafSimilar(TreeNode* root1, TreeNode* root2) {
        vector <int> r1;
        vector <int> r2;
        stack <TreeNode *> s1;
        stack <TreeNode *> s2;
        while (true){
            if (root1!=NULL){
                s1.push(root1);
                root1=root1->left;
            }
            else {
                if (s1.empty()){
                    break;
                }
                root1=s1.top();
                s1.pop();
                if (root1->left==NULL && root1->right==NULL){
                    r1.push_back(root1->val);
                }
                root1=root1->right;
            }
        }
        while (true){
            if (root2!=NULL){
                s2.push(root2);
                root2=root2->left;
            }
            else {
                if (s2.empty()){
                    break;
                }
                root2=s2.top();
                s2.pop();
                if (root2->left==NULL && root2->right==NULL){
                    r2.push_back(root2->val);
                }
                root2=root2->right;
            }
        }
        return r1==r2;
    }
};
